<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rentals – Livyro</title>

<!-- SUPABASE LOAD FIRST -->
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>

<style>
body { margin:0; font-family:Arial; background:#faf7ff; }
.header { padding:20px; background:#6A0DAD; color:#fff; text-align:center; font-size:26px; }
.grid { max-width:1000px; margin:20px auto; display:grid; gap:20px; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); }
.card { background:#fff; padding:12px; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,.1); }
</style>
</head>

<body>

<div class="header">Livyro Rentals</div>
<div id="grid" class="grid"></div>

<!-- YOUR SCRIPT AT BOTTOM -->
<script>
/* CHECK IF SUPABASE LOADED */
if (!window.supabase) {
  alert("Supabase not loaded. Check internet or script URL.");
}

/* CREATE CLIENT */
const { createClient } = window.supabase;

const supabaseClient = createClient(
  "https://ehzwbbypvccuhfhvukpp.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVoendiYnlwdmNjdWhmaHZ1a3BwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzNTQzMzMsImV4cCI6MjA4NjkzMDMzM30.JPsDBtJVw-lrlr8Y2ipioNQtc80DZ0v1wKcPtz0ixzI"
);

async function loadProperties() {
  const grid = document.getElementById("grid");
  grid.innerHTML = "Loading...";

  const { data, error } = await supabaseClient
    .from("properties")
    .select("*")
    .limit(6);

  if (error) {
    grid.innerHTML = "Error loading data";
    console.error(error);
    return;
  }

  grid.innerHTML = "";

  data.forEach(p => {
    grid.innerHTML += `
      <div class="card">
        <h3>${p.title}</h3>
        <p>${p.city}</p>
        <p>₹${p.rent}</p>
      </div>`;
  });
}

loadProperties();
</script>

</body>
</html>
